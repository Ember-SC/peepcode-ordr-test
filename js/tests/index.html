<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Peepcode Ordr Integration Tests</title>

  <!-- Test Libs -->
  <link rel="stylesheet" type="text/css" href="./jasmine.css">
  <style type="text/css">
    #HTMLReporter, #app-root {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
    }
    #app-root {
      top: 50%;
    }
  </style>
  <script type="text/javascript" src="./jasmine.js"></script>
  <script type="text/javascript" src="./jasmine-html.js"></script>

  <!-- App libs -->
  <script src="../libs/jquery-1.9.1.js"></script>
  <script src="../libs/handlebars.js"></script>
  <script src="../libs/ember.js"></script>
  <script src="../libs/ember-data.js"></script>
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>

  <!-- Ordr App -->
  <div id="app-root"></div>

  <script type="text/x-handlebars" data-template-name="application">
    <div class="row">
      <div class="twelve columns">
        <h1>Ordr</h1>
        <hr>
        <p>{{outlet}}</p>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="tables">
    <div class="row">
      <div class="four columns" id="tables">
        {{ partial "tableMenu" }}
      </div>
      <div class="eight columns" id="order">
        {{ outlet }}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="tables/index">
    <h2>Select a table at left</h2>
  </script>

  <script type="text/x-handlebars" data-template-name="_tableMenu">
    <h2>Tables</h2>
    {{#each table in controller}}
    {{#linkTo "table" table class="panel six columns"}} {{ table.id }}{{/linkTo}}
    {{/each}}
  </script>

  <script type="text/x-handlebars" data-template-name="table">
    <div class="row">
      <div class="three columns">
        {{ render "food" }}
      </div>
      <div class="nine columns">
        <h2>Table <span>{{ id }}</span></h2>
        {{ render "tab" tab }}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="tab">
    <ul id="customer-tab">
      {{#each tabItem in tabItems}}
      <li><h3>{{tabItem.food.name}} <span>${{money tabItem.cents}}</span></h3></li>
      {{else}}
      <li><h3>Click a food to add it</h3></li>
      {{/each}}
      <li id="total"><h3>Total <span>${{money cents}}</span></h3></li>
    </ul>
  </script>

  <script type="text/x-handlebars" data-template-name="food">
    <ul id="menu">
      {{#each controller}}
      <li>
        <a href="#" {{action "addFood" this}}>
          <img {{ bindAttr src="imageUrl" }}>
          <p>{{ name }}</p>
        </a>
      </li>
      {{/each}}
    </ul>
  </script>

  <script src="../app.js"></script>

  <!-- include spec files here... -->
  <!-- Integration tests -->
  <script type="text/javascript" src="./tests/integration.js"></script>

  <script type="text/javascript">
    (function() {
      var jasmineEnv = jasmine.getEnv();
      jasmineEnv.updateInterval = 1000;

      var htmlReporter = new jasmine.HtmlReporter();

      jasmineEnv.addReporter(htmlReporter);

      jasmineEnv.specFilter = function(spec) {
        return htmlReporter.specFilter(spec);
      };

      // Ordr app
      setTimeout(function () {
        //window.App.ready(function() {
          jasmineEnv.execute();
        //});
      }, 1000);

    }());
  </script>

</body>
</html>
